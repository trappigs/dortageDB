@model IEnumerable<dortageDB.Entities.SeoSetting>
@{
    ViewData["Title"] = "SEO Ayarları";
    Layout = "_LayoutVekarer";
}

<link rel="stylesheet" href="~/css/vekarer-main-panel.css" asp-append-version="true" />

<div class="main-panel">
    <div class="panel-header d-flex justify-content-between align-items-center">
        <h2><i class="fas fa-search"></i> SEO Ayarları</h2>
        <a asp-action="CreateSeoSetting" class="btn btn-primary">
            <i class="fas fa-plus"></i> Yeni SEO Ayarı
        </a>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <div class="panel-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Sayfa Yolu</th>
                        <th>Sayfa Başlığı</th>
                        <th>Meta Açıklama</th>
                        <th>Durum</th>
                        <th>Son Güncelleme</th>
                        <th>İşlemler</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Any())
                    {
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    <strong>@item.PagePath</strong>
                                </td>
                                <td>@(item.PageTitle ?? "-")</td>
                                <td>
                                    @if (!string.IsNullOrEmpty(item.MetaDescription))
                                    {
                                        <span title="@item.MetaDescription">
                                            @(item.MetaDescription.Length > 50 ? item.MetaDescription.Substring(0, 50) + "..." : item.MetaDescription)
                                        </span>
                                    }
                                    else
                                    {
                                        <span>-</span>
                                    }
                                </td>
                                <td>
                                    @if (item.IsActive)
                                    {
                                        <span class="badge bg-success">Aktif</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-secondary">Pasif</span>
                                    }
                                </td>
                                <td>@(item.UpdatedAt?.ToString("dd.MM.yyyy HH:mm") ?? item.CreatedAt.ToString("dd.MM.yyyy HH:mm"))</td>
                                <td>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <a asp-action="EditSeoSetting" asp-route-id="@item.Id"
                                           class="btn btn-warning" title="Düzenle">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <a asp-action="DeleteSeoSetting" asp-route-id="@item.Id"
                                           class="btn btn-danger" title="Sil">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="6" class="text-center py-4">
                                <i class="fas fa-info-circle"></i> Henüz SEO ayarı eklenmemiş.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <div class="alert alert-info mt-4">
            <h5><i class="fas fa-info-circle"></i> Bilgi</h5>
            <p class="mb-0">
                SEO ayarları sayfalarınızın arama motorlarında nasıl görüneceğini belirler.
                Her sayfa için özel ayarlar tanımlayabilir veya varsayılan değerlerin kullanılmasını sağlayabilirsiniz.
            </p>
            <hr>
            <p class="mb-0"><strong>Örnek Sayfa Yolları:</strong></p>
            <ul class="mb-0">
                <li><code>/</code> - Anasayfa</li>
                <li><code>/proje</code> - Projeler listesi</li>
                <li><code>/hakkimizda</code> - Hakkımızda sayfası</li>
                <li><code>/iletisim</code> - İletişim sayfası</li>
            </ul>
        </div>
    </div>
</div>
