<div class="nav-menus">
    <!-- Main Navigation -->
    <nav class="navbar" role="navigation" aria-label="Ana navigasyon">
        <a asp-controller="" asp-action="" class="logo" style="text-decoration: none;">
            <img src="~/images/logo.png" alt="Dortage Logo" class="logo-image" />
        </a>

        <!-- Desktop Menu -->
        <ul class="nav-menu">
            <li class="nav-item">
                <a asp-controller="" asp-action="" class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "" && ViewContext.RouteData.Values["controller"]?.ToString() == "" ? "active" : "")">Anasayfa</a>
            </li>
            <li class="nav-item">
                <a asp-controller="TopraktarNedir" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "" ? "active" : "")">Topraktar Nedir?</a>
            </li>
            <li class="nav-item">
                <a asp-controller="Proje" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Proje" ? "active" : "")">Projeler</a>
            </li>
            <li class="nav-item">
                <a asp-controller="TopraktarAkademi" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "TopraktarAkademi" ? "active" : "")">Topraktar Akademi</a>
            </li>
            <li class="nav-item">
                <a asp-controller="Hakkimizda" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Hakkimizda" ? "active" : "")">Hakkımızda</a>
            </li>
            <li class="nav-item">
                <a asp-controller="Iletisim" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Iletisim" ? "active" : "")">İletişim</a>
            </li>
        </ul>

        <!-- Desktop Buttons -->
        <div class="nav-buttons">
            @if (User.Identity.IsAuthenticated)
            {
                <a asp-controller="Settings" asp-action="Profile" class="btn btn-outlined">Profilim</a>
                <a asp-controller="Dashboard" asp-action="Index" class="btn btn-outlined">Dashboard</a>
                <form asp-controller="Account" asp-action="Logout" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-filled">Çıkış Yap</button>
                </form>
            }
            else
            {
                <a asp-controller="Account" asp-action="Login" class="btn btn-outlined">Giriş Yap</a>
                <a asp-controller="Account" asp-action="Register" class="btn btn-filled">Kayıt Ol →</a>
            }
        </div>

        <!-- Mobile Menu Toggle -->
        <div class="mobile-menu-toggle" aria-label="Menüyü aç" role="button" tab="0">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu">
        <div class="mobile-menu-header">
            <a asp-controller="" asp-action="" class="logo" style="text-decoration: none;">
                <img style="height: 45px;" src="~/images/logo.png" alt="Dortage Logo" class="logo-image" />
            </a>
            <button class="close-menu" aria-label="Menüyü kapat">×</button>
        </div>

        <ul class="mobile-nav-menu">
            <li class="mobile-nav-item">
                <a asp-controller="" asp-action="" class="mobile-nav-link">Anasayfa</a>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="" asp-action="" class="mobile-nav-link">Topraktar Nedir?</a>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="Proje" asp-action="Index" class="mobile-nav-link">Projeler</a>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="TopraktarAkademi" asp-action="Index" class="mobile-nav-link">Topraktar Akademi</a>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="Hakkimizda" asp-action="Index" class="mobile-nav-link">Hakkımızda</a>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="Iletisim" asp-action="Index" class="mobile-nav-link">İletişim</a>
            </li>
            @if (User.Identity.IsAuthenticated)
            {
                <li class="mobile-nav-item">
                    <a asp-controller="Dashboard" asp-action="Index" class="mobile-nav-link">Dashboard</a>
                </li>
            }

            <!-- Auth Links -->
            @if (User.Identity.IsAuthenticated)
            {
                <li class="mobile-nav-item">
                    <a asp-controller="Settings" asp-action="Profile" class="mobile-nav-link">Profilim</a>
                </li>
                <li class="mobile-nav-item">
                    <form asp-controller="Account" asp-action="Logout" method="post" style="margin: 0;">
                        <button type="submit" class="mobile-nav-link mobile-nav-logout">Çıkış Yap</button>
                    </form>
                </li>
            }
            else
            {
                <li class="mobile-nav-item">
                    <a asp-controller="Account" asp-action="Login" class="mobile-nav-link">Giriş Yap</a>
                </li>
                <li class="mobile-nav-item">
                    <a asp-controller="Account" asp-action="Register" class="mobile-nav-link">Kayıt Ol</a>
                </li>
            }
        </ul>
    </div>
</div>

<link rel="stylesheet" href="~/css/nav-menu.css" asp-append-version="true" />

<script>
    // Mobile menu toggle
    const menuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');
    const closeMenu = document.querySelector('.close-menu');

    // Function to lock body scroll
    function lockScroll() {
        document.body.style.overflow = 'hidden';
        document.body.style.position = 'fixed';
        document.body.style.width = '100%';
    }

    // Function to unlock body scroll
    function unlockScroll() {
        document.body.style.overflow = '';
        document.body.style.position = '';
        document.body.style.width = '';
    }

    menuToggle.addEventListener('click', () => {
        mobileMenu.classList.add('active');
        lockScroll();
    });

    closeMenu.addEventListener('click', () => {
        mobileMenu.classList.remove('active');
        unlockScroll();
    });

    // Mobile dropdown toggle
    document.querySelectorAll('[data-dropdown]').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const dropdownId = link.getAttribute('data-dropdown');
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.toggle('active');
        });
    });

    // Close mobile menu when clicking outside
    mobileMenu.addEventListener('click', (e) => {
        if (e.target === mobileMenu) {
            mobileMenu.classList.remove('active');
            unlockScroll();
        }
    });

    // Keyboard navigation
    menuToggle.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            mobileMenu.classList.add('active');
            lockScroll();
        }
    });
</script>
