<div class="nav-menus">
    <!-- Main Navigation -->
    <nav class="navbar" role="navigation" aria-label="Ana navigasyon">
        <a asp-controller="" asp-action="" class="logo" style="text-decoration: none;">DORTAGE</a>

        <!-- Desktop Menu -->
        <ul class="nav-menu">
            <li class="nav-item">
                <a asp-controller="" asp-action="" class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "" && ViewContext.RouteData.Values["controller"]?.ToString() == "" ? "active" : "")">Ana Sayfa</a>
            </li>
            <li class="nav-item">
                <a asp-controller="" asp-action="" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "" ? "active" : "")">
                    Projeler
                    <span class="dropdown-arrow">▼</span>
                </a>
                <div class="dropdown">
                    <a asp-controller="" asp-action="" class="dropdown-item">Tüm Projeler</a>
                    <a asp-controller="" asp-action="" asp-route-city="Istanbul" class="dropdown-item">İstanbul Projeleri</a>
                    <a asp-controller="" asp-action="" asp-route-city="Ankara" class="dropdown-item">Ankara Projeleri</a>
                    <a asp-controller="" asp-action="" asp-route-city="Izmir" class="dropdown-item">İzmir Projeleri</a>
                </div>
            </li>
            <li class="nav-item">
                <a asp-controller="" asp-action="" class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "" ? "active" : "")">Topraktar Ol</a>
            </li>
            <li class="nav-item">
                <a asp-controller="" asp-action="" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Academy" ? "active" : "")">Topraktar Akademisi</a>
            </li>
            <li class="nav-item">
                <a asp-controller="" asp-action="" class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "" ? "active" : "")">Hakkımızda</a>
            </li>
            <li class="nav-item">
                <a asp-controller="" asp-action="" class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "" ? "active" : "")">İletişim</a>
            </li>
        </ul>

        <!-- Desktop Buttons -->
        <div class="nav-buttons">
            @if (User.Identity.IsAuthenticated)
            {
                <a asp-controller="Settings" asp-action="Profile" class="btn btn-outlined">Profilim</a>
                <form asp-controller="Account" asp-action="Logout" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-filled">Çıkış Yap</button>
                </form>
            }
            else
            {
                <a asp-controller="Account" asp-action="Login" class="btn btn-outlined">Giriş Yap</a>
                <a asp-controller="Account" asp-action="Register" class="btn btn-filled">Kayıt Ol →</a>
            }
        </div>

        <!-- Mobile Menu Toggle -->
        <div class="mobile-menu-toggle" aria-label="Menüyü aç" role="button" tab="0">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu">
        <div class="mobile-menu-header">
            <a asp-controller="" asp-action="" class="logo" style="text-decoration: none;">DORTAGE</a>
            <button class="close-menu" aria-label="Menüyü kapat">×</button>
        </div>

        <ul class="mobile-nav-menu">
            <li class="mobile-nav-item">
                <a asp-controller="" asp-action="" class="mobile-nav-link">Ana Sayfa</a>
            </li>
            <li class="mobile-nav-item">
                <a href="#" class="mobile-nav-link" data-dropdown="projects">Projeler ▼</a>
                <div class="mobile-dropdown-items" id="projects">
                    <a asp-controller="" asp-action="" class="mobile-dropdown-item">Tüm Projeler</a>
                    <a asp-controller="" asp-action="" asp-route-city="Istanbul" class="mobile-dropdown-item">İstanbul Projeleri</a>
                    <a asp-controller="" asp-action="" asp-route-city="Ankara" class="mobile-dropdown-item">Ankara Projeleri</a>
                    <a asp-controller="" asp-action="" asp-route-city="Izmir" class="mobile-dropdown-item">İzmir Projeleri</a>
                </div>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="" asp-action="" class="mobile-nav-link">Topraktar Ol</a>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="" asp-action="" class="mobile-nav-link">Topraktar Akademisi</a>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="" asp-action="" class="mobile-nav-link">Hakkımızda</a>
            </li>
            <li class="mobile-nav-item">
                <a asp-controller="" asp-action="" class="mobile-nav-link">İletişim</a>
            </li>
        </ul>

        <div class="mobile-buttons">
            @if (User.Identity.IsAuthenticated)
            {
                <a asp-controller="" asp-action="" class="btn btn-outlined">Profilim</a>
                <form asp-controller="" asp-action="" method="post">
                    <button type="submit" class="btn btn-filled" style="width: 100%;">Çıkış Yap</button>
                </form>
            }
            else
            {
                <a asp-controller="Account" asp-action="Login" class="btn btn-outlined">Giriş Yap</a>
                <a asp-controller="Account" asp-action="Register" class="btn btn-filled">Kayıt Ol →</a>
            }
        </div>
    </div>
</div>

<link rel="stylesheet" href="~/css/nav-menu.css" asp-append-version="true" />

<script>
    // Mobile menu toggle
    const menuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');
    const closeMenu = document.querySelector('.close-menu');

    menuToggle.addEventListener('click', () => {
        mobileMenu.classList.add('active');
    });

    closeMenu.addEventListener('click', () => {
        mobileMenu.classList.remove('active');
    });

    // Mobile dropdown toggle
    document.querySelectorAll('[data-dropdown]').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const dropdownId = link.getAttribute('data-dropdown');
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.toggle('active');
        });
    });

    // Close mobile menu when clicking outside
    mobileMenu.addEventListener('click', (e) => {
        if (e.target === mobileMenu) {
            mobileMenu.classList.remove('active');
        }
    });

    // Keyboard navigation
    menuToggle.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            mobileMenu.classList.add('active');
        }
    });
</script>
